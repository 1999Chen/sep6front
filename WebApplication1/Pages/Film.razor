@page "/film"
@using WebApplication1.Model
@using WebApplication1.Data
@inject NavigationManager NavigationManager
@inject IMovieService MovieService

<div id="filmInfo">
    <h4>Result</h4>
    <div class="fInfo">
        <label><h3>@title</h3></label>

    </div>
    <div class="fInfo">
        <label>Year</label>
        <label>@year</label>
    </div>
    <div class="fInfo">
        <label>FilmStars</label>
        <label>@filmStar</label>
    </div>
    <div class="fInfo">
        <label>Director</label>
        <label>@director</label>
    </div>
    <button @onclick="addFilm">Add to my favorite! </button>
</div>

@code {

    private IMovieService movieService;
    public string title { set; get; }
    public int year { set; get; }
    public string filmStar { set; get; }
    public string director { set; get; }


    public IList<Film> allFilms;


    public void addFilm()
    {

        NavigationManager.NavigateTo("/LogIn");
    }

    protected  override void OnInitialized()
    {

        try
        {
            movieService = new CloudMovieService();
            //Movie movie = await movieService.getMovieById(1);


            Movie movie =  movieService.getMovieById(1).Result;
            title = movie.title;
            //    Console.WriteLine(movieService.getMovieById(1).Result.title);



        }
        catch(Exception e)
        {
            Console.WriteLine(e);
            throw;
        }

    }


}
